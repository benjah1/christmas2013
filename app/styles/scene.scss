$animate-time: 1.6s;
$animate-delay: 0.28*$animate-time;

$maxWidth: 800px;
$maxHeight: 450px;

body {
	background-color: #000;
	color: #fff;
	overflow: hidden;
}

@mixin el( $el, $ox, $oy, $oz){
	.wrapper-#{$el} {
		width:100%;
		height:100%;
		//-webkit-transform: scale3d(1,1,1); // debug
		-webkit-transform-style: preserve-3d;
		@if $ox != 0 {
			-webkit-transform-origin-x: #{$ox}px;
		}
		@if $oy != 0 {
			-webkit-transform-origin-y: #{$oy}px;
		}
		@if $oz != 0 {
			-webkit-transform-origin-z: #{$oz}px;
		}
	}
}

#stage{
	width: 0;
	height: 0;
	background-color: rgba(30, 30, 30, 0.5);
	-webkit-transition: margin-top 0.3s linear;

	.scene {
		//background-color: rgba(0,0,0,0.8);
		width:$maxWidth;
		height:$maxHeight;
		margin: 0 auto!important;
		position:inherit!important;
		-webkit-transition: -webkit-transform 0.3s linear;
		-webkit-transform-origin-y:450px;
		div {
			position:absolute;
			top:0;
			left:0;
		}
	}
	
	.ground {
		width: $maxWidth;
		height: $maxHeight;
		background-color: #eee;
		-webkit-box-shadow: #eee 0 0 20px 20px;
		-webkit-border-radius: 10px;
	}
	.wrapper-scene, .t_ground, .t_tree, .b_snowman, .a_snowman, .g_gift{
		width: 100%;
		height: 100%;
		-webkit-transform-style: preserve-3d;
	}

	.t_ground{
		-webkit-transform: rotateX(90deg);
	}
	.t_tree, .b_snowman, .a_snowman, .g_gift{
		-webkit-transform: rotateX(-90deg);
	}

	.t_text {
		color: #ddd;
		font: {
			size: 140px;
			weight: bold;
			family: 'Tangerine', cursive;
		}
		line-height: 0.8em;
		p {
			text-shadow:0px 0px 20px #f00;
		}
	}

	@include el('ground', 0, 0, 0);
	@include el('t_feet', 120, 230, 0);
	@include el('t_mid', 120, 35, 0);
	@include el('t_top', 250, 25, 0);
	@include el('t_star', 180, 10, 0);

	@include el('b_body', 560, 190, 0);
	@include el('b_dress', 130, 90, 0);
	@include el('b_hat', 100, 10, 0);

	@include el('a_body', 650, 220, 0);
	@include el('a_dress', 160, 140, 0);
	@include el('a_hat', 130, 10, 0);

	@include el('g_top', 320, 225, 70);
	@include el('g_left_t', 320, 225, 70);
	@include el('g_mid_t', 320, 225, 70);
	@include el('g_right_t', 320, 225, 70);
	@include el('g_left_l', 320, 225, 70);
	@include el('g_mid_l', 320, 225, 70);
	@include el('g_right_l', 320, 225, 70);

	@include el('t_text', 320, 225, 70);

}

.bounce {
	.animate {
		-webkit-animation: BOUNCING $animate-time;
		-webkit-animation-fill-mode: forwards;
		-webkit-transform: scale3d(0,0,0);
	}

	@for $i from 0 through 7 {
		.bouncing-#{$i} {
			-webkit-animation-delay: $i*$animate-delay;
		}		
	}
}

@-webkit-keyframes BOUNCING{
	0% {
		-webkit-transform: scale3d(0,0,0);
	}
	30% {
		-webkit-transform: scale3d(1.4,1.4,1.4);
	}
	50% {
		-webkit-transform: scale3d(0.6,0.6,0.6);
	}
	65% {
		-webkit-transform: scale3d(1.2,1.2,1.2);
	}
	80% {
		-webkit-transform: scale3d(0.8,0.8,0.8);
	}
	100% {
		-webkit-transform: scale3d(1,1,1);
	}
}

.erupt {
	.wrapper-ground.animate {
		-webkit-animation: ERUPTION-GROUND $animate-time;
	}
}

@-webkit-keyframes ERUPTION-GROUND{
	0% {
		-webkit-transform: scale3d(1,1,1);
	}
	30% {
		-webkit-transform: scale3d(1.4, 1.4, 0.6);
	}
	50% {
		-webkit-transform: scale3d(0.6, 0.6, 1.4);
	}
	65% {
		-webkit-transform: scale3d(1.2, 1.2, 0.8);
	}
	80% {
		-webkit-transform: scale3d(0.8, 0.8, 1.2);
	}
	100% {
		-webkit-transform: scale3d(1,1,1);
	}
}


